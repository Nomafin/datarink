<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>datarink</title>
	<link rel="icon" href="favicon.ico" type="image/x-icon">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<!-- Template for teamsViewComponent -->
	<script type="text/x-template" id="teams-view-template">
		<div>
			<div class="table-header">
				<h1>Teams: 2016-2017</h1>
				<div class="table-controls" v-if="teams">
					<select v-model="strengthSit">
						<option value="all">All situations</option>
						<option value="ev5">5 on 5</option>
						<option value="sh">Short handed</option>
						<option value="pp">Power play</option>
					</select
					><button type="button" class="toggle-button"
						v-on:click="visibleColumns.onIceGoals === false ? visibleColumns.onIceGoals = true : visibleColumns.onIceGoals = false"
						v-bind:class="{ 'toggle-button-checked': visibleColumns.onIceGoals }">
						<span class="checkbox-container">
							<span class="checkbox-checkmark"></span>
						</span>On-ice goals</button
					><button type="button" class="toggle-button"
						v-on:click="visibleColumns.onIceCorsi === false ? visibleColumns.onIceCorsi = true : visibleColumns.onIceCorsi = false"
						v-bind:class="{ 'toggle-button-checked': visibleColumns.onIceCorsi }">
						<span class="checkbox-container">
							<span class="checkbox-checkmark"></span>
						</span>On-ice corsi</button>
				</div>
			</div>
			<div class="loader" v-if="!teams"></div>
			<div class="table-container" v-if="teams">
				<table v-bind:class="{ 'cols-on-ice-goals': visibleColumns.onIceGoals, 'cols-on-ice-corsi': visibleColumns.onIceCorsi }">
					<thead>
						<tr>
							<th @click="sortBy('team');" @keyup.enter="sortBy('team');" class="left-aligned" tabindex=0
								v-bind:class="[ sort.col === 'team' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Name</th>
							<th @click="sortBy('pts');" @keyup.enter="sortBy('pts');" tabindex=0
								v-bind:class="[ sort.col === 'pts' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Pts</th>
							<th @click="sortBy('gp');" @keyup.enter="sortBy('gp');" tabindex=0
								v-bind:class="[ sort.col === 'gp' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>GP</th>
							<th @click="sortBy('toi');" @keyup.enter="sortBy('toi');" tabindex=0
								v-bind:class="[ sort.col === 'toi' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Mins</th>
							<th @click="sortBy('gf');" @keyup.enter="sortBy('gf');" class="cols-on-ice-goals" tabindex=0
								v-bind:class="[ sort.col === 'gf' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>GF</th>
							<th @click="sortBy('ga');" @keyup.enter="sortBy('ga');" class="cols-on-ice-goals" tabindex=0
								v-bind:class="[ sort.col === 'ga' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>GA</th>
							<th @click="sortBy('gDiff');" @keyup.enter="sortBy('gDiff');" class="cols-on-ice-goals" tabindex=0
								v-bind:class="[ sort.col === 'gDiff' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>G diff</th>
							<th @click="sortBy('shPct');" @keyup.enter="sortBy('shPct');" class="cols-on-ice-goals" tabindex=0
								v-bind:class="[ sort.col === 'shPct' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Sh%</th>
							<th @click="sortBy('svPct');" @keyup.enter="sortBy('svPct');" class="cols-on-ice-goals" tabindex=0
								v-bind:class="[ sort.col === 'svPct' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Sv%</th>
							<th @click="sortBy('cf');" @keyup.enter="sortBy('cf');" class="cols-on-ice-corsi" tabindex=0
								v-bind:class="[ sort.col === 'cf' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>CF</th>
							<th @click="sortBy('ca');" @keyup.enter="sortBy('ca');" class="cols-on-ice-corsi" tabindex=0
								v-bind:class="[ sort.col === 'ca' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>CA</th>
							<th @click="sortBy('cfPct');" @keyup.enter="sortBy('cfPct');" class="cols-on-ice-corsi" tabindex=0
								v-bind:class="[ sort.col === 'cfPct' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>CF%</th>
							<th @click="sortBy('cfPctAdj');" @keyup.enter="sortBy('cfPctAdj');" class="cols-on-ice-corsi" tabindex=0
								v-bind:class="[ sort.col === 'cfPctAdj' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>CF%, score-adj</th>
						</tr>
					</thead>
					<tbody>
						<tr v-for="p in sortedTeams">
							<td class="left-aligned">{{ p.team.toUpperCase() }}</td>
							<td>{{ p.pts }}</td>
							<td>{{ p.gp }}</td>
							<td>{{ Math.round(p.toi / 60) }}</td>
							<td class="cols-on-ice-goals">{{ p.gf }}</td>
							<td class="cols-on-ice-goals">{{ p.ga }}</td>
							<td class="cols-on-ice-goals">{{ p.g_diff | signed }}</td>
							<td class="cols-on-ice-goals">{{ p.sh_pct | percentage }}<span class="pct">%</span></td>
							<td class="cols-on-ice-goals">{{ p.sv_pct | percentage }}<span class="pct">%</span></td>					
							<td class="cols-on-ice-corsi">{{ p.cf }}</td>
							<td class="cols-on-ice-corsi">{{ p.ca }}</td>
							<td class="cols-on-ice-corsi">{{ p.cf_pct | percentage }}<span class="pct">%</span></td>
							<td class="cols-on-ice-corsi">{{ p.cf_pct_adj | percentage }}<span class="pct">%</span></td>			
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</script>
	<!-- Template for playersViewComponent -->
	<script type="text/x-template" id="players-view-template">
		<div>
			<div class="table-header">
				<h1>Skaters: 2016-2017</h1>
				<div class="table-controls" v-if="players">
					<select v-model="strengthSit">
						<option value="all">All situations</option>
						<option value="ev5">5 on 5</option>
						<option value="sh">Short handed</option>
						<option value="pp">Power play</option>
					</select
					><button type="button" class="toggle-button"
						v-on:click="visibleColumns.individual === false ? visibleColumns.individual = true : visibleColumns.individual = false"
						v-bind:class="{ 'toggle-button-checked': visibleColumns.individual }">
						<span class="checkbox-container">
							<span class="checkbox-checkmark"></span>
						</span>Own production</button
					><button type="button" class="toggle-button"
						v-on:click="visibleColumns.onIceGoals === false ? visibleColumns.onIceGoals = true : visibleColumns.onIceGoals = false"
						v-bind:class="{ 'toggle-button-checked': visibleColumns.onIceGoals }">
						<span class="checkbox-container">
							<span class="checkbox-checkmark"></span>
						</span>On-ice goals</button
					><button type="button" class="toggle-button"
						v-on:click="visibleColumns.onIceCorsi === false ? visibleColumns.onIceCorsi = true : visibleColumns.onIceCorsi = false"
						v-bind:class="{ 'toggle-button-checked': visibleColumns.onIceCorsi }">
						<span class="checkbox-container">
							<span class="checkbox-checkmark"></span>
						</span>On-ice corsi</button
					><div class="search-with-menu">
						<select v-model="search.col" v-on:change="search.query = '';">
							<option value="name">Name:</option>
							<option value="teams">Team:</option>
							<option value="positions">Position:</option>
						</select
						><input v-model="search.query" type="text" v-on:keyup.enter="blurInput($event);">
						<p v-if="search.col === 'positions'" class="tooltip">For forwards, type 'f'</p>
					</div
					><div class="search-with-menu">
						<label for="minimum-toi">Minimum minutes:</label
						><input id="minimum-toi" v-model.number="minimumToi" v-on:keyup.enter="blurInput($event);" type="number" style="width: 62px;">
					</div>
				</div>
			</div>
			<div class="loader" v-if="!players"></div>
			<div class="table-container" v-if="players">
				<table v-bind:class="{ 'cols-individual': visibleColumns.individual, 'cols-on-ice-goals': visibleColumns.onIceGoals, 'cols-on-ice-corsi': visibleColumns.onIceCorsi }">
					<thead>
						<tr>
							<th @click="sortBy('name');" @keyup.enter="sortBy('name');" class="left-aligned" tabindex=0
								v-bind:class="[ sort.col === 'name' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Name</th>
							<th @click="sortBy('positions');" @keyup.enter="sortBy('positions');" class="left-aligned" tabindex=0
								v-bind:class="[ sort.col === 'positions' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Pos</th>
							<th @click="sortBy('teams');" @keyup.enter="sortBy('teams');" class="left-aligned" tabindex=0
								v-bind:class="[ sort.col === 'teams' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Team</th>
							<th @click="sortBy('gp');" @keyup.enter="sortBy('gp');" tabindex=0
								v-bind:class="[ sort.col === 'gp' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>GP</th>
							<th @click="sortBy('toi');" @keyup.enter="sortBy('toi');" tabindex=0
								v-bind:class="[ sort.col === 'toi' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Mins</th>
							<th @click="sortBy('ig');" @keyup.enter="sortBy('ig');" class="cols-individual" tabindex=0
								v-bind:class="[ sort.col === 'ig' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>G</th>
							<th @click="sortBy('ia1');" @keyup.enter="sortBy('ia1');" class="cols-individual" tabindex=0
								v-bind:class="[ sort.col === 'ia1' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>A1</th>
							<th @click="sortBy('ia2');" @keyup.enter="sortBy('ia2');" class="cols-individual" tabindex=0
								v-bind:class="[ sort.col === 'ia2' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>A2</th>
							<th @click="sortBy('ip');" @keyup.enter="sortBy('ip');" class="cols-individual" tabindex=0
								v-bind:class="[ sort.col === 'ip' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>P</th>
							<th @click="sortBy('ic');" @keyup.enter="sortBy('ic');" class="cols-individual" tabindex=0
								v-bind:class="[ sort.col === 'ic' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>C</th>
							<th @click="sortBy('iShPct');" @keyup.enter="sortBy('iShPct');" class="cols-individual" tabindex=0
								v-bind:class="[ sort.col === 'iShPct' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Own Sh%</th>
							<th @click="sortBy('gf');" @keyup.enter="sortBy('gf');" class="cols-on-ice-goals" tabindex=0
								v-bind:class="[ sort.col === 'gf' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>GF</th>
							<th @click="sortBy('ga');" @keyup.enter="sortBy('ga');" class="cols-on-ice-goals" tabindex=0
								v-bind:class="[ sort.col === 'ga' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>GA</th>
							<th @click="sortBy('gDiff');" @keyup.enter="sortBy('gDiff');" class="cols-on-ice-goals" tabindex=0
								v-bind:class="[ sort.col === 'gDiff' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>G diff</th>
							<th @click="sortBy('shPct');" @keyup.enter="sortBy('shPct');" class="cols-on-ice-goals" tabindex=0
								v-bind:class="[ sort.col === 'shPct' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Sh%</th>
							<th @click="sortBy('svPct');" @keyup.enter="sortBy('svPct');" class="cols-on-ice-goals" tabindex=0
								v-bind:class="[ sort.col === 'svPct' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>Sv%</th>
							<th @click="sortBy('cf');" @keyup.enter="sortBy('cf');" class="cols-on-ice-corsi" tabindex=0
								v-bind:class="[ sort.col === 'cf' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>CF</th>
							<th @click="sortBy('ca');" @keyup.enter="sortBy('ca');" class="cols-on-ice-corsi" tabindex=0
								v-bind:class="[ sort.col === 'ca' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>CA</th>
							<th @click="sortBy('cfPct');" @keyup.enter="sortBy('cfPct');" class="cols-on-ice-corsi" tabindex=0
								v-bind:class="[ sort.col === 'cfPct' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>CF%</th>
							<th @click="sortBy('cfPctRel');" @keyup.enter="sortBy('cfPctRel');" class="cols-on-ice-corsi" tabindex=0
								v-bind:class="[ sort.col === 'cfPctRel' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>CF%, rel</th>
							<th @click="sortBy('cfPctAdj');" @keyup.enter="sortBy('cfPctAdj');" class="cols-on-ice-corsi" tabindex=0
								v-bind:class="[ sort.col === 'cfPctAdj' ? (sort.order === -1 ? 'sort-desc' : 'sort-asc') : '' ]"
								>CF%, score-adj</th>
						</tr>
					</thead>
					<tbody>
						<tr v-for="p in playersOnPage">
							<td class="left-aligned">{{ p.first + " " + p.last }}</td>			
							<td class="left-aligned uppercased">{{ p.positions }}</td>
							<td class="left-aligned uppercased">{{ p.teams }}</td>
							<td>{{ p.gp }}</td>
							<td>{{ Math.round(p.toi / 60) }}</td>
							<td class="cols-individual">{{ p.ig }}</td>
							<td class="cols-individual">{{ p.ia1 }}</td>
							<td class="cols-individual">{{ p.ia2 }}</td>
							<td class="cols-individual">{{ p.ip }}</td>
							<td class="cols-individual">{{ p.ic }}</td>
							<td class="cols-individual">{{ p.i_sh_pct | percentage }}<span class="pct">%</span></td>
							<td class="cols-on-ice-goals">{{ p.gf }}</td>
							<td class="cols-on-ice-goals">{{ p.ga }}</td>
							<td class="cols-on-ice-goals">{{ p.g_diff | signed }}</td>
							<td class="cols-on-ice-goals">{{ p.sh_pct | percentage }}<span class="pct">%</span></td>
							<td class="cols-on-ice-goals">{{ p.sv_pct | percentage }}<span class="pct">%</span></td>					
							<td class="cols-on-ice-corsi">{{ p.cf }}</td>
							<td class="cols-on-ice-corsi">{{ p.ca }}</td>
							<td class="cols-on-ice-corsi">{{ p.cf_pct | percentage }}<span class="pct">%</span></td>
							<td class="cols-on-ice-corsi">{{ p.cf_pct_rel | percentage | signed }}<span class="pct">%</span></td>
							<td class="cols-on-ice-corsi">{{ p.cf_pct_adj | percentage }}<span class="pct">%</span></td>			
						</tr>
					</tbody>
				</table>
				<div class="pagination" v-if="pagination.total > 0">
					<button type="button" @click="pagination.current--; flagPlayersOnPage();" class="previous">
						<svg viewBox="0 0 16 16">
							<path d="M10,3,5,8l5,5L11,12,7,8,11,4Z"/>
						</svg>
					</button
					><div>
						<span>{{ pagination.current + 1 }}</span
						><span> of </span
						><span>{{ pagination.total }}</span>
					</div
					><button type="button" @click="pagination.current++; flagPlayersOnPage();" class="next">
						<svg viewBox="0 0 16 16">
							<path d="M10,3,5,8l5,5L11,12,7,8,11,4Z" transform="rotate(180 8 8)"/>
						</svg>
					</button>
				</div>
			</div>
		</div>
	</script>
	<!-- Root element for application -->
	<div id="app">
		<p class="system-message"><strong>Sorry if the site's slow!</strong> This is a test run to estimate hosting costs.</p>
		<div class="header">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
				<path class="logo-r" d="M16,8V32h8V16h8V8Z"/>
				<path class="logo-d" d="M16,24v8H0V8H16V0h8v8H16v8H8v8Z"/>
			</svg
			><router-link to="/teams">Teams</router-link
			><router-link to="/players">Skaters</router-link>
		</div>
		<router-view>
		</router-view>
	</div>
	<div class="footer">
		<span>Contact</span>
		<a href="mailto:datarink@gmail.com">datarink@gmail.com</a>
		<a href="http://www.twitter.com/datarink">@datarink</a>
	</div>
	<script>
		if (window.location.hostname.toLowerCase() !== "localhost") {
			(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");
			ga("create", "UA-88347694-1", "auto");
		}
	</script>
	<script src="lodash.js"></script>
	<script src="vue.js"></script>
	<script src="teams-router-view-component.js"></script>
	<script src="players-router-view-component.js"></script>
	<script src="vue-router.js"></script>
	<script src="app-constants.js"></script>
	<script src="app.js"></script>
</body>
</html>